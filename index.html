<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON Tycoon | Ultimate Edition</title>
    <script src="https://sad.adsgram.ai/js/adsgram-ad-sdk.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Inter:wght@400;900&display=swap');
        body { background-color: #020617; color: white; font-family: 'Inter', sans-serif; overflow: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); }
        .battery-grid { display: grid; grid-template-columns: repeat(8, 1fr); gap: 4px; }
        .battery-cell { height: 32px; border-radius: 4px; background: #000; border: 1px solid #1e293b; position: relative; overflow: hidden; }
        .battery-fill { position: absolute; bottom: 0; width: 100%; height: 100%; transition: all 0.5s; }
        .full { background: linear-gradient(to top, #0088cc, #00d4ff); box-shadow: 0 0 10px #0088cc; }
        .nav-btn { flex: 1; text-align: center; padding: 12px; font-size: 10px; font-weight: 900; color: #475569; transition: 0.3s; }
        .nav-btn.active { color: #0088cc; border-top: 2px solid #0088cc; }
        .page { display: none; height: calc(100vh - 80px); overflow-y: auto; padding: 20px; }
        .page.active { display: block; }
        .ton-font { font-family: 'Orbitron', sans-serif; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <div id="mining-page" class="page active">
        <div class="flex justify-between items-center mb-8">
            <div class="flex items-center gap-2">
                <div id="dot" class="w-2 h-2 bg-red-500 rounded-full"></div>
                <span class="text-[10px] font-bold tracking-widest text-slate-500 uppercase">Mining Node</span>
            </div>
            <button onclick="connectWallet()" id="w-status" class="glass px-4 py-2 rounded-xl text-[9px] font-black text-blue-400">CONNECT TONKEEPER</button>
        </div>

        <div class="text-center mb-10">
            <p class="text-[10px] font-black text-slate-500 tracking-[0.3em] uppercase mb-2">Available TON</p>
            <h1 id="balance" class="ton-font text-5xl tracking-tighter">0.000000</h1>
        </div>

        <div class="glass p-6 rounded-[2.5rem] mb-6">
            <div class="flex justify-between text-[10px] font-black mb-3 text-blue-300">
                <span>ENERGY MATRIX</span>
                <span id="batt-count">0 / 24</span>
            </div>
            <div id="batteryContainer" class="battery-grid mb-6"></div>
            <button onclick="showModal('contractModal')" class="w-full bg-orange-500 text-black font-black py-5 rounded-3xl text-xs uppercase tracking-widest active:scale-95 shadow-lg shadow-orange-500/20">Mining Contracts</button>
        </div>
    </div>

    <div id="friends-page" class="page">
        <h2 class="text-2xl font-black mb-6 text-center">Invite Friends</h2>
        <div class="glass p-8 rounded-[2.5rem] text-center mb-6">
            <p class="text-xs text-slate-400 mb-6 font-medium">Earn 0.10 TON for every active miner you invite!</p>
            <div class="bg-black/40 p-4 rounded-2xl text-[10px] font-mono text-blue-400 border border-white/5 mb-4 select-all">
                https://t.me/YourBot?start=ref19316
            </div>
            <button onclick="alert('Link Copied!')" class="w-full py-4 glass rounded-2xl text-xs font-black">COPY REFERRAL LINK</button>
        </div>
    </div>

    <div id="wallet-page" class="page">
        <h2 class="text-2xl font-black mb-6 text-center">Wallet Settings</h2>
        <div class="glass p-6 rounded-[2.5rem] mb-4">
            <p class="text-[10px] font-black text-slate-500 uppercase mb-4">Linked Wallet</p>
            <p id="linked-addr" class="text-xs font-mono text-blue-300 break-all mb-4 uppercase tracking-tighter italic">Not Connected</p>
            <button onclick="connectWallet()" class="w-full py-3 bg-blue-500/10 border border-blue-500/30 rounded-xl text-[10px] font-black">CHANGE WALLET</button>
        </div>
        <div class="glass p-6 rounded-[2.5rem]">
            <p class="text-[10px] font-black text-slate-500 uppercase mb-4">Withdrawal</p>
            <button onclick="withdraw()" class="w-full py-5 bg-white text-black rounded-2xl text-xs font-black uppercase">Withdraw to Tonkeeper</button>
            <p class="text-center text-[9px] text-slate-600 mt-4 italic">Min. withdraw: 5.00 TON</p>
        </div>
    </div>

    <div id="contractModal" class="fixed inset-0 bg-black/95 z-50 hidden p-6">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-xl font-black">CONTRACTS</h2>
            <button onclick="hideModal('contractModal')" class="text-2xl">‚úï</button>
        </div>
        <div class="glass p-5 rounded-3xl mb-4 flex justify-between items-center">
            <div>
                <h3 class="font-bold text-sm">Free Power</h3>
                <p class="text-[9px] text-slate-400 italic">+1 Battery / 1 Ad</p>
            </div>
            <button onclick="watchAd()" id="adBtn" class="bg-blue-500 px-6 py-2 rounded-xl text-[10px] font-black">CHARGE</button>
        </div>
        <div class="glass p-5 rounded-3xl opacity-60">
            <div class="flex justify-between mb-4">
                <h3 class="font-bold text-sm uppercase">USDT Full Refill</h3>
                <span class="text-green-500 font-bold">$4.99</span>
            </div>
            <button onclick="payUSDT()" class="w-full py-3 border border-white/10 rounded-xl text-[10px] font-bold">PAY TO: TNNFBZE...EL3bpX</button>
        </div>
    </div>

    <div class="mt-auto glass border-t border-white/10 flex p-2 rounded-t-[2.5rem]">
        <div onclick="nav('mining')" id="nav-mining" class="nav-btn active">‚õèÔ∏è<br>MINING</div>
        <div onclick="nav('friends')" id="nav-friends" class="nav-btn">üë•<br>FRIENDS</div>
        <div onclick="nav('wallet')" id="nav-wallet" class="nav-btn">üëõ<br>WALLET</div>
    </div>

    <script>
        let balance = parseFloat(localStorage.getItem('b_ton')) || 0;
        let batteries = parseInt(localStorage.getItem('b_batt')) || 0;
        let wallet = localStorage.getItem('b_wal') || "";

        function render() {
            const container = document.getElementById('batteryContainer');
            container.innerHTML = '';
            for (let i = 0; i < 24; i++) {
                const cell = document.createElement('div');
                cell.className = 'battery-cell';
                const fill = document.createElement('div');
                fill.className = i < batteries ? 'battery-fill full' : 'battery-fill';
                cell.appendChild(fill);
                container.appendChild(cell);
            }
            document.getElementById('balance').innerText = balance.toFixed(6);
            document.getElementById('batt-count').innerText = `${batteries} / 24`;
            document.getElementById('dot').className = batteries > 0 ? "w-2 h-2 bg-green-500 rounded-full animate-pulse" : "w-2 h-2 bg-red-500 rounded-full";
            document.getElementById('w-status').innerText = wallet ? "CONNECTED" : "CONNECT TONKEEPER";
            document.getElementById('linked-addr').innerText = wallet || "Not Connected";
        }

        setInterval(() => {
            if(batteries > 0) {
                balance += 0.000042;
                localStorage.setItem('b_ton', balance);
                render();
            }
        }, 1000);

        function nav(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id + '-page').classList.add('active');
            document.getElementById('nav-' + id).classList.add('active');
        }

        function showModal(id) { document.getElementById(id).classList.remove('hidden'); }
        function hideModal(id) { document.getElementById(id).classList.add('hidden'); }

        function watchAd() {
            const AdController = window.Adsgram.init({ blockId: "19316" });
            AdController.show().then(() => {
                if(batteries < 24) {
                    batteries++;
                    localStorage.setItem('b_batt', batteries);
                    render();
                } else { alert("Energy is full!"); }
            });
        }

        function connectWallet() {
            const addr = prompt("Enter Tonkeeper Wallet Address:");
            if(addr && addr.length > 10) {
                wallet = addr;
                localStorage.setItem('b_wal', wallet);
                render();
            }
        }

        function withdraw() {
            if(!wallet) { alert("Connect your Tonkeeper first!"); return; }
            if(balance < 5) { alert("Minimum withdraw: 5.00 TON"); return; }
            alert("Withdrawal request sent to: " + wallet);
        }

        function payUSDT() {
            prompt("Binance USDT (BEP20) Address:", "TNNFBZEbTgU1q2xKhVBC8CwrbzCmEL3bpX");
            alert("Send 4.99 USDT to this address and energy will refill.");
        }

        window.onload = render;
    </script>
</body>
</html>
